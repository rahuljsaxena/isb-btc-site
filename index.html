<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ISB Business Technology Club</title>
  <meta name="description" content="ISB Business Technology Club, build, automate, ship." />
  <style>
    :root{
      --bg:#070A12;
      --panel:rgba(255,255,255,0.06);
      --panel2:rgba(255,255,255,0.09);
      --text:rgba(255,255,255,0.92);
      --muted:rgba(255,255,255,0.72);
      --faint:rgba(255,255,255,0.55);
      --line:rgba(255,255,255,0.12);
      --glow:rgba(120,180,255,0.25);
      --glow2:rgba(190,120,255,0.18);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--text);
      background:
        radial-gradient(1000px 600px at 20% 15%, var(--glow), transparent 60%),
        radial-gradient(900px 600px at 80% 10%, var(--glow2), transparent 55%),
        radial-gradient(900px 600px at 50% 90%, rgba(80,255,210,0.10), transparent 60%),
        linear-gradient(180deg, #05060B 0%, #070A12 55%, #060913 100%);
      min-height:100vh;
      overflow-x:hidden;
    }
    .wrap{max-width:1100px;margin:0 auto;padding:28px 18px 60px}
    .topbar{
      display:flex;gap:14px;align-items:center;justify-content:space-between;
      padding:14px 16px;border:1px solid var(--line);border-radius:var(--radius);
      background:linear-gradient(180deg, var(--panel), transparent);
      backdrop-filter: blur(10px);
      position:sticky;top:14px;z-index:50;
    }
    @media (max-width: 920px){ .topbar{position:relative;top:auto} }
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:38px;height:38px;border-radius:12px;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.35), transparent 45%),
                  linear-gradient(135deg, rgba(120,180,255,0.9), rgba(190,120,255,0.85));
      box-shadow: 0 0 0 1px rgba(255,255,255,0.18), 0 10px 30px rgba(120,180,255,0.10);
    }
    .brand h1{font-size:14px;margin:0;letter-spacing:0.4px}
    .brand p{margin:2px 0 0;font-size:12px;color:var(--muted)}
    .nav{display:flex;gap:8px;flex-wrap:wrap;justify-content:flex-end}
    .tab{
      border:1px solid var(--line);
      background:rgba(255,255,255,0.03);
      color:var(--muted);
      padding:10px 12px;border-radius:14px;
      cursor:pointer;font-size:13px;
      transition: all 180ms ease;
      user-select:none;
    }
    .tab:hover{background:rgba(255,255,255,0.06);color:var(--text)}
    .tab.active{
      background:rgba(255,255,255,0.10);
      color:var(--text);
      box-shadow: 0 0 0 1px rgba(255,255,255,0.10), 0 18px 50px rgba(120,180,255,0.10);
    }

    .page{display:none;margin-top:18px}
    .page.active{display:block}
    .grid2{display:grid;grid-template-columns:1.05fr 0.95fr;gap:14px}
    @media (max-width: 920px){ .grid2{grid-template-columns:1fr;} }

    .card{
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:linear-gradient(180deg, var(--panel), rgba(255,255,255,0.02));
      backdrop-filter: blur(10px);
      overflow:hidden;
    }
    .pad{padding:18px}
    .headline{font-size:30px;line-height:1.08;margin:0 0 10px;letter-spacing:-0.6px}
    .sub{color:var(--muted);margin:0 0 14px;font-size:14px;line-height:1.5}
    input, select{
      width:100%;padding:12px 12px;border-radius:14px;
      border:1px solid var(--line);
      background:rgba(0,0,0,0.25);
      color:var(--text);
      outline:none;
    }
    input::placeholder{color:rgba(255,255,255,0.35)}
    .btnrow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .btn{
      border:1px solid rgba(255,255,255,0.16);
      background:linear-gradient(135deg, rgba(120,180,255,0.20), rgba(190,120,255,0.14));
      padding:12px 14px;border-radius:14px;
      color:var(--text);text-decoration:none;font-size:13px;
      display:inline-flex;align-items:center;gap:8px;
      cursor:pointer;
      transition: transform 140ms ease, background 180ms ease;
    }
    .btn:hover{transform: translateY(-1px);background:linear-gradient(135deg, rgba(120,180,255,0.26), rgba(190,120,255,0.18));}
    .btn.secondary{background:rgba(255,255,255,0.04);color:var(--muted)}
    .btn.secondary:hover{color:var(--text);background:rgba(255,255,255,0.07)}
    .small{font-size:12px;color:var(--faint);line-height:1.45;margin-top:10px}
    .ok{color:rgba(130,255,190,0.9)}
    .warn{color:rgba(255,210,130,0.95)}

    .videoWrap{position:relative;border-bottom:1px solid var(--line);background:rgba(0,0,0,0.25)}
    .videoOverlay{
      position:absolute;left:14px;right:14px;top:14px;
      padding:12px 12px;border-radius:16px;
      border:1px solid rgba(255,255,255,0.14);
      background:rgba(0,0,0,0.35);
      backdrop-filter: blur(10px);
      display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
      z-index:5;
    }
    .videoOverlay .left h3{margin:0;font-size:14px}
    .videoOverlay .left p{margin:4px 0 0;color:var(--muted);font-size:12px}
    .badge{
      padding:8px 10px;border-radius:999px;
      border:1px solid rgba(255,255,255,0.14);
      background:rgba(255,255,255,0.05);
      color:var(--muted);
      font-size:12px;white-space:nowrap;
    }
    iframe{width:100%;height:420px;border:0}

    .listItem{padding:14px 18px;border-top:1px solid var(--line)}
    .listItem h4{margin:0 0 6px 0;font-size:14px}
    .listItem p{margin:0;color:var(--muted);font-size:13px;line-height:1.5}
    .listItem a{color:var(--text)}
    .pollOpt{display:flex;gap:10px;align-items:flex-start;padding:12px 0;border-top:1px solid var(--line)}
    .pollOpt:first-child{border-top:0}
    .pollOpt label{cursor:pointer}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1 id="clubName">ISB Business Technology Club</h1>
          <p id="clubMeta">Build, automate, ship, repeat</p>
        </div>
      </div>
      <div class="nav">
        <div class="tab active" data-page="join">Join</div>
        <div class="tab" data-page="newsletter">Newsletter</div>
        <div class="tab" data-page="activities">Activities</div>
        <div class="tab" data-page="about">About</div>
      </div>
    </div>

    <!-- JOIN -->
    <div class="page active" id="page-join">
      <div class="card">
        <div class="videoWrap">
          <div class="videoOverlay">
            <div class="left">
              <h3 id="overlayTitle">Welcome</h3>
              <p id="overlaySub">Watch the 20 second hello, then join the WhatsApp group.</p>
            </div>
            <div class="badge" id="batchBadge">PGPpro Delhi Co’26</div>
          </div>
          <iframe id="heygenFrame" title="Welcome video" src="" allow="autoplay; fullscreen; picture-in-picture"></iframe>
        </div>

        <div class="pad">
          <h2 class="headline">A futuristic club for people who like building smart stuff.</h2>
          <p class="sub">
            Join the WhatsApp group, send a 1 line intro, and get a weekly mini build challenge.
          </p>

          <div class="grid2">
            <div class="card"><div class="pad">
              <div class="small">Your name</div>
              <input id="nameInput" placeholder="Type your name" />
              <div class="small" style="margin-top:10px">What do you want from the club?</div>
              <select id="intentInput">
                <option value="AI builds">AI builds</option>
                <option value="Automation">Automation</option>
                <option value="Product and GTM">Product and GTM</option>
                <option value="Analytics">Analytics</option>
                <option value="No-code experiments">No-code experiments</option>
                <option value="Just exploring">Just exploring</option>
              </select>

              <div class="btnrow">
                <a class="btn" id="joinBtn" href="#" target="_blank" rel="noopener">Join WhatsApp group</a>
                <a class="btn secondary" id="chatBtn" href="#" target="_blank" rel="noopener">Message Rahul</a>
                <button class="btn secondary" id="copyIntroBtn" type="button">Copy intro text</button>
              </div>

              <div class="small">Privacy: your name stays in your browser.</div>
            </div></div>

            <div class="card"><div class="pad">
              <h3 style="margin:0 0 8px;">Subscribe to BTC Dispatch</h3>
              <p class="sub" style="margin:0 0 14px;">
                Add your ISB email, optional personal email. You will receive a weekly curated digest.
              </p>

              <div class="small">ISB email</div>
              <input id="isbEmail" placeholder="name@isb.edu" />

              <div class="small" style="margin-top:10px">Personal email (optional)</div>
              <input id="personalEmail" placeholder="name@gmail.com" />

              <div class="btnrow">
                <button class="btn" id="newsletterSignupBtn" type="button">Subscribe</button>
                <button class="btn secondary" id="copyNewsletterPromptBtn" type="button">Copy weekly prompt</button>
              </div>

              <div class="small" id="newsletterStatus">You will be added to btc@rahuljsaxena.com</div>
            </div></div>
          </div>
        </div>
      </div>
    </div>

    <!-- NEWSLETTER -->
    <div class="page" id="page-newsletter">
      <div class="card">
        <div class="pad">
          <h2 style="margin:0 0 8px;">BTC Dispatch</h2>
          <p class="sub" style="margin:0 0 14px;">
            This week’s sharpest moves in AI and business tech, plus a mini build idea.
          </p>
          <div class="btnrow">
            <button class="btn" id="refreshNewsletterBtn" type="button">Refresh this week</button>
          </div>
          <div class="small" id="newsletterPageStatus">Loading…</div>
        </div>
        <div id="newsletterList"></div>
      </div>
    </div>

    <!-- ACTIVITIES -->
    <div class="page" id="page-activities">
      <div class="card">
        <div class="pad">
          <h2 style="margin:0 0 8px;">Pick what we do next</h2>
          <p class="sub" style="margin:0 0 14px;">
            We will run one activity every 2 months. Vote for what you want first.
          </p>

          <div id="pollBox" class="card"><div class="pad">
            <div id="pollOptions"></div>
            <div class="btnrow">
              <button class="btn" id="voteBtn" type="button">Submit vote</button>
              <button class="btn secondary" id="resultsBtn" type="button">View results</button>
            </div>
            <div class="small" id="pollStatus"></div>
          </div></div>
        </div>
      </div>
    </div>

    <!-- ABOUT -->
    <div class="page" id="page-about">
      <div class="card">
        <div class="pad">
          <h2 style="margin:0 0 8px;">What this club is about</h2>
          <p class="sub">
            Business Technology Club exists to make modern tech feel usable, fast, and real.
            We do not worship tools. We care about outcomes, craft, and the habit of shipping.
          </p>
          <p class="sub">
            The ethos is simple: build small, learn in public, help others move faster.
            Every member should leave with a stronger personal tech stack, better judgment on what to use when,
            and at least one tangible artifact per term.
          </p>
          <p class="sub">
            If you are curious, join. If you want to build, you are already one of us.
          </p>
        </div>
      </div>
    </div>

  </div>

  <script>
    const CONFIG = {
      clubName: "ISB Business Technology Club",
      batchLabel: "PGPpro Delhi Co’26",
      tagline: "Build, automate, ship, repeat",
      whatsappGroupInviteLink: "https://chat.whatsapp.com/LG57im31bS6Ixz2CHxbpF7",
      whatsappAdminNumberIntlDigitsOnly: "918550978969",
      heygenEmbedUrl: "https://app.heygen.com/embedded-player/1c044ae1784d43dd8544423ae8932376",
      newsletterGroupEmail: "btc@rahuljsaxena.com",
      appsScriptWebAppUrl: "https://script.google.com/macros/s/AKfycbwI5SpsiOBivrUIlE0OPeWosQNg1vQqrHiwDV0mGlU9RTZvw8kxucW44Rl1LbfYOpbDGQ/exec"
    };

    const ACTIVITIES = [
      "Corporate Innovation Lab sprints, four to six weeks, problem backed, from hypothesis to demo, with PM artifacts and a simple impact metric such as hours saved or lead time reduced",
      "ISB x Industry challenges, live cases with tech toolkits, sponsor feedback, and short demos at close",
      "Frontier Tech Deep Dives, AI, data platforms, product strategy, quantum and applied cryptography, tied to business use cases",
      "Speaker series and mentorship circles, practitioners in product, tech consulting, and venture building, plus alumni office hours",
      "Recruiting prep and case competitions, focused tracks for product, digital strategy, and tech consulting",
      "Knowledge creation with SRITNE and interested faculty, short playbooks on what shipped, what worked, and why"
    ];

    const $ = (id) => document.getElementById(id);
    const encode = (s) => encodeURIComponent(s);

    function buildIntroText(name, intent){
      const safeName = (name || "I’m").trim();
      const safeIntent = (intent || "exploring").trim();
      return `Hi! ${safeName} wants to join ${CONFIG.clubName}. My focus: ${safeIntent}. One thing I want to build this term: _____.`;
    }

    function setHeader(){
      $("clubName").textContent = CONFIG.clubName;
      $("clubMeta").textContent = CONFIG.tagline;
      $("batchBadge").textContent = CONFIG.batchLabel;
      $("heygenFrame").src = CONFIG.heygenEmbedUrl;
      $("joinBtn").href = CONFIG.whatsappGroupInviteLink;
      setLinksAndOverlay();
    }

    function setLinksAndOverlay(){
      const name = $("nameInput").value.trim();
      const intent = $("intentInput").value;

      $("overlayTitle").textContent = name ? `Welcome, ${name}` : "Welcome";
      $("overlaySub").textContent = `Goal: ${intent}. Watch, then join the group.`;

      const msg = buildIntroText(name, intent);
      $("chatBtn").href = `https://wa.me/${CONFIG.whatsappAdminNumberIntlDigitsOnly}?text=${encode(msg)}`;
    }

    function apiUrl(params){
      const qs = new URLSearchParams(params).toString();
      return CONFIG.appsScriptWebAppUrl + "?" + qs;
    }

    async function subscribe(){
      const name = $("nameInput").value.trim();
      const intent = $("intentInput").value;
      const isbEmail = $("isbEmail").value.trim();
      const personalEmail = $("personalEmail").value.trim();

      $("newsletterStatus").textContent = "Subscribing…";

      const url = apiUrl({
        action: "subscribe",
        name,
        intent,
        isbEmail,
        personalEmail,
        groupEmail: CONFIG.newsletterGroupEmail
      });

      const res = await fetch(url);
      const data = await res.json();

      if (data.ok) {
        $("newsletterStatus").innerHTML = '<span class="ok">Subscribed. You will receive BTC Dispatch weekly.</span>';
      } else {
        $("newsletterStatus").innerHTML = '<span class="warn">Could not subscribe, ' + (data.error || "try again") + '</span>';
      }
    }

    async function loadNewsletterPage(){
      $("newsletterPageStatus").textContent = "Loading…";
      const res = await fetch(apiUrl({ action: "newsletter" }));
      const data = await res.json();

      if (!data.ok) {
        $("newsletterPageStatus").innerHTML = '<span class="warn">Could not load newsletter.</span>';
        return;
      }

      $("newsletterPageStatus").textContent = data.hook || "";
      const list = $("newsletterList");
      list.innerHTML = "";

      (data.items || []).forEach((it) => {
        const div = document.createElement("div");
        div.className = "listItem";
        div.innerHTML = `
          <h4>${it.title || ""}</h4>
          <p>Source: ${it.source || ""}</p>
          <p><a href="${it.link}" target="_blank" rel="noopener">Open</a></p>
        `;
        list.appendChild(div);
      });
    }

    function renderPoll(){
      const box = $("pollOptions");
      box.innerHTML = "";
      ACTIVITIES.forEach((a, idx) => {
        const row = document.createElement("div");
        row.className = "pollOpt";
        row.innerHTML = `
          <input type="radio" name="poll" id="opt-${idx}" value="${encodeURIComponent(a)}">
          <label for="opt-${idx}">
            <div style="font-weight:600">${idx + 1}</div>
            <div style="color:rgba(255,255,255,0.72);font-size:13px;line-height:1.5">${a}</div>
          </label>
        `;
        box.appendChild(row);
      });
      $("pollStatus").textContent = "";
    }

    async function submitVote(){
      const name = $("nameInput").value.trim();
      const selected = document.querySelector('input[name="poll"]:checked');
      if (!selected) {
        $("pollStatus").innerHTML = '<span class="warn">Pick one option first.</span>';
        return;
      }

      $("pollStatus").textContent = "Submitting…";
      const choice = decodeURIComponent(selected.value);

      const res = await fetch(apiUrl({ action: "vote", name, choice }));
      const data = await res.json();

      if (data.ok) $("pollStatus").innerHTML = '<span class="ok">Vote recorded.</span>';
      else $("pollStatus").innerHTML = '<span class="warn">Vote failed.</span>';
    }

    async function viewResults(){
      $("pollStatus").textContent = "Loading results…";
      const res = await fetch(apiUrl({ action: "poll_results" }));
      const data = await res.json();

      if (!data.ok) {
        $("pollStatus").innerHTML = '<span class="warn">Could not load results.</span>';
        return;
      }

      const counts = data.counts || {};
      const lines = Object.keys(counts)
        .sort((a, b) => counts[b] - counts[a])
        .slice(0, 6)
        .map(k => `• ${k} (${counts[k]})`)
        .join("<br>");

      $("pollStatus").innerHTML = '<span class="ok">Top votes</span><br>' + (lines || "No votes yet");
    }

    function wireTabs(){
      document.querySelectorAll(".tab").forEach(t => {
        t.addEventListener("click", async () => {
          document.querySelectorAll(".tab").forEach(x => x.classList.remove("active"));
          t.classList.add("active");

          const page = t.getAttribute("data-page");
          document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
          $("page-" + page).classList.add("active");

          if (page === "newsletter") await loadNewsletterPage();
          if (page === "activities") renderPoll();

          window.scrollTo({ top: 0, behavior: "smooth" });
        });
      });
    }

    $("copyIntroBtn").addEventListener("click", async () => {
      const txt = buildIntroText($("nameInput").value.trim(), $("intentInput").value);
      await navigator.clipboard.writeText(txt);
      $("copyIntroBtn").textContent = "Copied";
      setTimeout(() => $("copyIntroBtn").textContent = "Copy intro text", 1200);
    });

    const WEEKLY_PROMPT = `
You are the editor for ISB Business Technology Club’s weekly newsletter.
Audience: busy MBA students. Tone: classy, futuristic, crisp. No fluff.
Input I will provide: links plus short notes.

Rules:
- Do not copy long text from sources.
- Summarize in your own words, add my commentary, include links back.
- Output must be skimmable and actionable.

Format:
1) Title + 1 line hook
2) 5 drops: what it is, why it matters, try it in 10 minutes
3) Prompt of the week: prompt, when to use, variations
4) Campus use case in 5 lines
5) Member spotlight placeholder
6) Close with CTA

Write Issue #__ for week ending __ using sources below:
[SOURCES]
`;

    $("copyNewsletterPromptBtn").addEventListener("click", async () => {
      await navigator.clipboard.writeText(WEEKLY_PROMPT.trim());
      $("copyNewsletterPromptBtn").textContent = "Copied";
      setTimeout(() => $("copyNewsletterPromptBtn").textContent = "Copy weekly prompt", 1200);
    });

    $("newsletterSignupBtn").addEventListener("click", () => subscribe());
    $("refreshNewsletterBtn").addEventListener("click", () => loadNewsletterPage());
    $("voteBtn").addEventListener("click", () => submitVote());
    $("resultsBtn").addEventListener("click", () => viewResults());

    ["nameInput","intentInput"].forEach(id => {
      $(id).addEventListener("input", () => setLinksAndOverlay());
      $(id).addEventListener("change", () => setLinksAndOverlay());
    });

    wireTabs();
    setHeader();
  </script>
</body>
</html>
